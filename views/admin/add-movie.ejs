<%- include("../include/top.ejs") %>
</head>

<body>
    <%- include("../include/nav.ejs") %>
    <form autocomplete="off" method="POST" action="<% id ? '/admin/edit-movie/' + id : '/admin/add-movie' %>"
        class="container my-2" enctype="multipart/form-data">
        <% if(errorMessage){ %>
        <div class="alert alert-danger text-center my-2" role="alert">
            <%= errorMessage %>
        </div>
        <% } %>
        <div class="row justify-content-center">
            <div class="col-12 col-md-8">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" class="form-control" id="title" name="title"
                        value="<%= oldInput && oldInput.title %>">
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea class="form-control" id="description" rows="3"
                        name="description"><%= oldInput && oldInput.description %></textarea>
                </div>
                <div class=" form-group">
                    <label for="year">Year</label>
                    <input type="string" class="form-control" id="year" name="year"
                        value="<%= oldInput && oldInput.year %>">
                </div>
                <div class="custom-file mb-2">
                    <label class="custom-file-label"
                        for="img"><%= oldInput ? oldInput.imgUrl : "Choose Image" %></label>
                    <input type="file" class="custom-file-input" id="img" name="img">
                    <input type="hidden" name="imgUrl" value="<%= oldInput && oldInput.imgUrl%>">
                </div>
                <div class="form-group">
                    <label for="startDate">Start Date</label>
                    <input type="datetime-local" class="form-control" id="start-startDate" name="startDate"
                        value="<%= oldInput && oldInput.startDate %>" />
                </div>
                <div class="form-group">
                    <label for="end-startDate">End Date</label>
                    <input type="date" class="form-control" id="end-startDate" name="endDate"
                        value="<%= oldInput && oldInput.endDate %>" />
                </div>
                <div class="form-group">
                    <label for="seats">Seats</label>
                    <input type="number" class="form-control" id="seats" name="seats"
                        value="<%= oldInput && oldInput.seats %>" />
                </div>
                <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                <div class="row">
                    <div class="col-6">
                        <button type="submit"
                            class="btn btn-success btn-lg btn-block"><%= id ? "Update" : oldInput ? "Correct" : "Add" %></button>
                    </div>
                    <div class="col-6">
                        <a class="btn btn-warning btn-lg btn-block" href="/admin/movies">Cancel</a>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <%- include("../include/bottom.ejs") %>